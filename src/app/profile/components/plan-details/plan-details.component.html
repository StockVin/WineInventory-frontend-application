<div class="plan-details-container">
  <h2 class="plan-details__title">{{ 'profile.planDetails.title' | translate }}</h2>
  <p class="plan-details__subtitle">{{ 'profile.planDetails.subtitle' | translate }}</p>

  <ng-container *ngIf="plans?.length; else emptyState">
    <div class="plan-details__grid">
      <div
        *ngFor="let plan of plans; index as planIndex"
        class="plan-card"
        [class.plan-card--current]="plan.planId === selectedPlanId"
      >
        <div class="plan-card__header">
          <div class="plan-card__current-badge" *ngIf="plan.planId === selectedPlanId">
            {{ 'profile.planDetails.now' | translate }}
          </div>
          <h3 class="plan-card__name">{{ plan.planType }}</h3>
          <div class="plan-card__price">
            {{ plan.price }} {{ plan.currency }}<small *ngIf="plan.paymentFrequency !== 'None'"> / {{ plan.paymentFrequency }}</small>
          </div>
          <p class="plan-card__description">
            {{ plan.description }}
          </p>
          <div class="plan-card__max-products">
            <strong>Max Products:</strong> {{ plan.maxProducts }}
          </div>
        </div>

        <div class="plan-card__features">
          <div class="plan-card__feature">
            <mat-icon class="plan-card__feature-icon">check_circle</mat-icon>
            <span>Payment Frequency: {{ plan.paymentFrequency }}</span>
          </div>
          <div class="plan-card__feature">
            <mat-icon class="plan-card__feature-icon">inventory_2</mat-icon>
            <span>Maximum Products: {{ plan.maxProducts }}</span>
          </div>
          <div class="plan-card__feature">
            <mat-icon class="plan-card__feature-icon">payments</mat-icon>
            <span>Currency: {{ plan.currency }}</span>
          </div>
        </div>

        <div class="plan-card__actions">
          <button
            type="button"
            class="plan-card__button"
            [class.plan-card__button--current]="plan.planId === selectedPlanId"
            (click)="onSelectPlan(plan.planId)"
            [disabled]="disabled || plan.planId === selectedPlanId"
          >
            {{ plan.planId === selectedPlanId ? ('profile.buttons.selectedPlan' | translate) : ('profile.buttons.plans' | translate) }}
          </button>
        </div>
      </div>
    </div>
  </ng-container>

  <ng-template #emptyState>
    <div class="plan-details__empty">
      <span class="material-symbols-outlined plan-details__empty-icon">info</span>
      <h3 class="plan-details__empty-title">Plans Not Available</h3>
      <p class="plan-details__empty-message">
        There are no plans available to display at this time. Please try again later.
      </p>
    </div>
  </ng-template>
</div>

